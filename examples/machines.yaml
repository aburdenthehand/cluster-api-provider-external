items:
- apiVersion: "cluster.k8s.io/v1alpha1"
  kind: Machine
  metadata:
    generateName: metal-master-
    labels:
      set: master
  spec:
    providerConfig:
      value:
        apiVersion: "extproviderconfig/v1alpha1"
        kind: "ExtMachineProviderConfig"
        roles:
        - Master
        zone: "$ZONE"
        machineType: "n1-standard-2"
        os: "ubuntu-1604-lts"
	crudPrimitives:
	  container:
	    name: baremetal-fencing
    	    image: quay.io/beekhof/fence-agents:latest
  	    createCmd: [ "/sbin/fence_ipmilan", "--user", "admin", "-o", "on", "--ip", "1.2.3.4" ]
  	    deleteCmd: [ "/sbin/fence_ipmilan", "--user", "admin", "-o", "off", "--ip", "1.2.3.4" ]
  	    argumentFormat: cli
  	    passTargetAs: port
	    secrets:
	    - password: ipmi-secret    versions:
    versions:
      kubelet: 1.9.4
      controlPlane: 1.9.4
- apiVersion: "cluster.k8s.io/v1alpha1"
  kind: Machine
  metadata:
    generateName: metal-node-
    labels:
      set: node
  spec:
    providerConfig:
      value:
        apiVersion: "extproviderconfig/v1alpha1"
        kind: "ExtMachineProviderConfig"
        roles:
        - Node
        zone: "$ZONE"
        machineType: "n1-standard-1"
        os: "ubuntu-1604-lts"
	crudPrimitives:
	  container:
	    name: baremetal-fencing
    	    image: quay.io/beekhof/fence-agents:latest
  	    createCmd: [ "/sbin/fence_ipmilan", "--user", "admin", "-o", "on", "--ip", "1.2.3.5" ]
  	    deleteCmd: [ "/sbin/fence_ipmilan", "--user", "admin", "-o", "off", "--ip", "1.2.3.5" ]
  	    argumentFormat: cli
  	    passTargetAs: port
	    secrets:
	    - password: ipmi-secret    versions:
    versions:
      kubelet: 1.9.4
